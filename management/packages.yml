# ================================================================
# Universal Package Configuration
# ================================================================
# Single source of truth for ALL packages across ALL platforms
# Parsed by management/parse-packages.py
# Last updated: 2025-11-27

# ================================================================
# MACOS HOMEBREW TAPS
# ================================================================
# Third-party Homebrew taps to add before installing packages
# These provide packages not in the main Homebrew repository

macos_taps:
  - docker/docker # Docker official tap for latest versions

# ================================================================
# SYSTEM PACKAGES
# ================================================================
# Installed via OS package managers: apt (Ubuntu), pacman (Arch), brew (macOS)
# Omit a platform if the tool is installed via other methods
# See notes at bottom for exclusions (bat, eza, fd, neovim, etc.)

system_packages:
  # Essential Build Tools
  - name: build-essential
    apt: build-essential
    pacman: base-devel
    description: Compiler and build tools

  - name: ca-certificates
    apt: ca-certificates
    pacman: ca-certificates
    brew: ca-certificates
    description: SSL/TLS certificates

  - name: pkg-config
    apt: pkg-config
    pacman: pkgconf
    brew: pkg-config
    description: Build configuration tool

  - name: libssl-dev
    apt: libssl-dev
    pacman: openssl
    description: SSL development libraries

  # Python YAML library (needed for parse-packages.py)
  - name: python3-yaml
    apt: python3-yaml
    pacman: python-yaml
    description: Python YAML library for parsing packages.yml

  # Core Development Tools
  - name: git
    apt: git
    pacman: git
    brew: git
    description: Version control system

  - name: gh
    apt: gh
    pacman: github-cli
    brew: gh
    description: GitHub CLI

  - name: awscli
    brew: awscli
    description: AWS CLI (macOS only - Linux uses official installer)

  - name: curl
    apt: curl
    pacman: curl
    brew: curl
    description: Transfer data with URLs

  - name: wget
    apt: wget
    pacman: wget
    brew: wget
    description: File retrieval

  - name: unzip
    apt: unzip
    pacman: unzip
    brew: unzip
    description: Archive extraction

  - name: ripgrep
    apt: ripgrep
    pacman: ripgrep
    brew: ripgrep
    description: Fast grep alternative

  - name: tmux
    apt: tmux
    pacman: tmux
    brew: tmux
    description: Terminal multiplexer

  - name: jq
    apt: jq
    pacman: jq
    brew: jq
    description: JSON processor

  - name: tree
    apt: tree
    pacman: tree
    brew: tree
    description: Directory tree visualization

  - name: htop
    apt: htop
    pacman: htop
    brew: htop
    description: Interactive process viewer

  # Shell
  - name: zsh
    apt: zsh
    pacman: zsh
    description: Z shell (macOS has it pre-installed)

  # Docker (cross-platform via official repos - WSL uses Windows Docker Desktop)
  # Ubuntu: requires running setup-docker-official-repo-ubuntu.sh first
  # Arch: official repos already up-to-date
  # macOS: uses docker/docker tap (see macos_taps section)
  - name: docker
    apt: docker-ce
    pacman: docker
    brew: docker
    description: Docker CLI (official repositories)

  - name: docker-cli
    apt: docker-ce-cli
    description: Docker CLI (Ubuntu official repo - separate package)

  - name: colima
    brew: colima
    description: Container runtime for macOS (Docker Desktop alternative)

  - name: containerd
    apt: containerd.io
    pacman: containerd
    description: Container runtime

  - name: docker-buildx-plugin
    apt: docker-buildx-plugin
    pacman: docker-buildx
    description: Docker Buildx plugin

  - name: docker-compose-plugin
    apt: docker-compose-plugin
    pacman: docker-compose
    brew: docker-compose
    description: Docker Compose V2 plugin
    # Post-install setup (macOS with colima):
    #   mkdir -p "$DOCKER_CONFIG/cli-plugins"
    #   ln -sfn $(brew --prefix)/opt/docker-compose/bin/docker-compose "$DOCKER_CONFIG/cli-plugins/docker-compose"
    # This enables the modern 'docker compose' command (without hyphen)
    # DOCKER_CONFIG is already set to $XDG_CONFIG_HOME/docker in zshrc

  # Note: docker-completion is automatically installed as a dependency of docker on macOS
  # On Linux (apt/pacman), completions are included with docker packages

  # Programming Languages
  - name: lua
    apt: lua5.4
    pacman: lua
    brew: lua
    description: Lua scripting language

  - name: luajit
    apt: luajit
    pacman: luajit
    brew: luajit
    description: LuaJIT compiler

  - name: luarocks
    pacman: luarocks
    brew: luarocks
    description: Lua package manager

  - name: ruby
    brew: ruby
    description: Ruby programming language (macOS only in Brewfile)

  # Language Servers
  - name: lua-language-server
    brew: lua-language-server
    description: Lua LSP (macOS only for now)

  # Linters & Formatters
  - name: shellcheck
    apt: shellcheck
    pacman: shellcheck
    brew: shellcheck
    description: Shell script linter

  - name: shfmt
    apt: shfmt
    pacman: shfmt
    brew: shfmt
    description: Shell script formatter

  # Security
  - name: gnupg
    apt: gnupg
    pacman: gnupg
    brew: gnupg
    description: GPG encryption

  - name: gpgme
    apt: libgpgme-dev
    pacman: gpgme
    brew: gpgme
    description: GPG Made Easy library (required by gpg-tui)

  - name: libgpg-error
    apt: libgpg-error-dev
    pacman: libgpg-error
    brew: libgpg-error
    description: GPG error library (required by gpg-tui)

  - name: libx11
    apt: libx11-dev
    pacman: libx11
    brew: libx11
    description: X11 client library (required by gpg-tui)

  - name: libxcb-shape
    apt: libxcb-shape0-dev
    pacman: libxcb
    description: X protocol C-language Binding - shape extension (required by gpg-tui on Linux)

  - name: libxcb-xfixes
    apt: libxcb-xfixes0-dev
    pacman: libxcb
    description: X protocol C-language Binding - xfixes extension (required by gpg-tui on Linux)

  - name: libxkbcommon
    apt: libxkbcommon-dev
    pacman: libxkbcommon
    description: Keyboard handling library (required by gpg-tui on Linux)

  # Media Processing
  - name: ffmpeg
    apt: ffmpeg
    pacman: ffmpeg
    brew: ffmpeg
    description: Video/audio processing

  - name: imagemagick
    apt: imagemagick
    pacman: imagemagick
    brew: imagemagick
    description: Image processing

  - name: poppler-utils
    apt: poppler-utils
    pacman: poppler
    brew: poppler
    description: PDF rendering library (provides pdftoppm, pdftotext, etc.)

  - name: chafa
    apt: chafa
    pacman: chafa
    brew: chafa
    description: Image to ASCII converter (used by Yazi for image preview)

  # Note: resvg removed - now embedded in Yazi as a Rust crate (not needed separately)

  # Archive Tools
  - name: 7zip
    apt: 7zip-standalone
    pacman: 7zip
    brew: sevenzip
    description: 7-Zip compression (provides 7zz command on all platforms)

  # Build & Task Automation
  - name: go-task
    brew: go-task
    description: Task runner (apt/pacman install via script or AUR)

  # macOS-Specific Tools
  - name: gnu-sed
    brew: gnu-sed
    description: GNU sed (macOS only, available as gsed)

  - name: gnu-tar
    brew: gnu-tar
    description: GNU tar (macOS only, available as gtar)

  - name: grep
    brew: grep
    description: GNU grep (macOS only)

  - name: coreutils
    brew: coreutils
    description: GNU core utilities (macOS only, g-prefixed)

  - name: findutils
    brew: findutils
    description: GNU find utilities (macOS only)

  - name: mas
    brew: mas
    description: Mac App Store CLI (macOS only)

  - name: duti
    brew: duti
    description: File association manager (macOS only)

  # Note: glow and duf moved to github_binaries for universal installation

  - name: git-secrets
    brew: git-secrets
    description: Prevent committing secrets (macOS Brewfile)

  # Shell and utilities
  - name: bash
    apt: bash
    pacman: bash
    brew: bash
    description: Bash shell (macOS default is outdated)

  - name: watch
    apt: procps
    pacman: procps-ng
    brew: watch
    description: Execute program periodically (used in watchports alias)

  # Network Tools
  - name: nmap
    apt: nmap
    pacman: nmap
    brew: nmap
    description: Network scanner

  # Media & Utilities
  - name: mpv
    apt: mpv
    pacman: mpv
    brew: mpv
    description: Media player (used by Yazi for video playback)

  - name: graphviz
    apt: graphviz
    pacman: graphviz
    brew: graphviz
    description: Graph visualization

  - name: figlet
    apt: figlet
    pacman: figlet
    brew: figlet
    description: ASCII art text

  # Security & Development Tools
  - name: mkcert
    apt: mkcert
    pacman: mkcert
    brew: mkcert
    description: Local HTTPS certificates for development

  # Notifications
  - name: libnotify
    apt: libnotify-bin
    pacman: libnotify
    description: Desktop notifications (provides notify-send)

  - name: terminal-notifier
    brew: terminal-notifier
    description: macOS notifications from terminal (macOS only)

# ================================================================
# RUNTIME VERSIONS
# ================================================================
# Minimum acceptable versions for language runtimes

runtimes:
  go:
    min_version: "1.23"
    install_method: github_release
    repo: golang/go

  node:
    version: "24.11.0"
    install_method: nvm

  terraform:
    version: "1.10.5"
    install_method: tenv

  rust:
    install_method: rustup
    url: https://sh.rustup.rs

# ================================================================
# GITHUB BINARY RELEASES
# ================================================================
# Tools installed via direct GitHub release downloads
# Each has a dedicated install script that reads from this config
#
# NOTE: Most install scripts detect platform (macOS/Linux) and architecture automatically.
# The binary_pattern field shows the pattern for reference, but scripts override with
# platform-specific values (e.g., Darwin vs Linux, x86_64 vs arm64).

github_binaries:
  - name: neovim
    repo: neovim/neovim
    min_version: "0.11"
    install_script: install-neovim.sh
    binary_pattern: "nvim-{platform}-{arch}.tar.gz" # Platform-specific: macos/linux
    install_dir: "~/.local/nvim-{platform}-{arch}" # Platform-specific
    binary_link: "~/.local/bin/nvim"

  - name: lazygit
    repo: jesseduffield/lazygit
    version: "0.56.0"
    install_script: install-lazygit.sh
    binary_pattern: "lazygit_{version}_{Platform}_{arch}.tar.gz" # Platform-specific: Darwin/Linux
    install_dir: "~/.local/bin"

  - name: yazi
    repo: sxyazi/yazi
    install_script: install-yazi.sh
    binary_pattern: "yazi-{arch}-{platform}.zip" # Platform-specific: apple-darwin/unknown-linux-gnu
    install_dir: "~/.local/bin"

  - name: fzf
    repo: junegunn/fzf
    min_version: "0.50"
    install_script: install-fzf.sh
    build_method: go # Universal: built from source
    install_dir: "~/.local/bin"

  - name: glow
    repo: charmbracelet/glow
    install_script: install-glow.sh
    binary_pattern: "glow_{version}_{platform}_{arch}.tar.gz" # Platform-specific: Darwin/linux
    install_dir: "~/.local/bin"

  - name: duf
    repo: muesli/duf
    install_script: install-duf.sh
    binary_pattern: "duf_{version}_{platform}_{arch}.tar.gz" # Platform-specific: darwin/linux
    install_dir: "~/.local/bin"

  # Terraform ecosystem tools
  - name: tenv
    repo: tofuutils/tenv
    install_script: language-managers/tenv.sh
    binary_pattern: "tenv_v{version}_{platform}_{arch}.tar.gz" # Platform-specific: darwin/linux
    install_dir: "~/.local/bin"
    description: Version manager for Terraform/OpenTofu/Terragrunt and Terraform runtime

  - name: terraform-ls
    repo: hashicorp/terraform-ls
    install_script: custom-installers/terraform-ls.sh
    binary_pattern: "terraform-ls_{version}_{platform}_{arch}.zip" # Platform-specific: darwin/linux
    install_dir: "~/.local/bin"
    description: Terraform Language Server (uses releases.hashicorp.com)

  - name: tflint
    repo: terraform-linters/tflint
    install_script: install-tflint.sh
    binary_pattern: "tflint_{platform}_{arch}.zip" # Platform-specific: darwin/linux
    install_dir: "~/.local/bin"
    description: Terraform linter

  - name: terraformer
    repo: GoogleCloudPlatform/terraformer
    version: "0.8.30"
    install_script: install-terraformer.sh
    binary_pattern: "terraformer-all-{platform}-{arch}" # Platform-specific: darwin/linux (direct binary)
    install_dir: "~/.local/bin"
    description: Generate Terraform from existing infrastructure

  - name: terrascan
    repo: tenable/terrascan
    install_script: install-terrascan.sh
    binary_pattern: "terrascan_{version}_{Platform}_{arch}.tar.gz" # Platform-specific: Darwin/Linux
    install_dir: "~/.local/bin"
    description: Terraform security scanner

  # Development Tools
  - name: zk
    repo: zk-org/zk
    install_script: install-zk.sh
    binary_pattern: "zk-{version}-{platform}-{arch}.tar.gz" # Platform-specific: macos/linux
    install_dir: "~/.local/bin"
    description: Plain text note-taking assistant

  - name: trivy
    repo: aquasecurity/trivy
    install_script: install-trivy.sh
    binary_pattern: "trivy_{version}_{OS}_{arch}.tar.gz" # Platform-specific: macOS-64bit/macOS-ARM64/Linux-64bit/Linux-ARM64
    install_dir: "~/.local/bin"
    description: Container/IaC vulnerability scanner

# ================================================================
# CARGO PACKAGES (Rust)
# ================================================================
# Installed via: cargo binstall -y <package>
# Fast pre-compiled binaries (much faster than cargo install)

cargo_packages:
  - name: bat
    command: bat
    description: cat with syntax highlighting

  - name: fd-find
    command: fd
    description: modern find replacement

  - name: eza
    command: eza
    description: modern ls replacement

  - name: zoxide
    command: zoxide
    description: smarter cd command

  - name: git-delta
    command: delta
    description: syntax-highlighting git diff

  - name: tinty
    command: tinty
    description: Base16 theme manager

  - name: cargo-update
    command: cargo-install-update
    description: update installed cargo packages

  - name: gpg-tui
    command: gpg-tui
    description: Terminal UI for managing GPG keys

# ================================================================
# TMUX PLUGINS
# ================================================================
# Installed via TPM (Tmux Plugin Manager)
# Universal across all platforms
# Plugins are declared in platforms/common/.config/tmux/tmux.conf
# TPM auto-installs plugins on tmux start (see tmux.conf lines 325-327)
#
# Current plugins:
#   - tmux-plugins/tpm (plugin manager)
#   - tmux-plugins/tmux-cpu (CPU/RAM status)
#   - tmux-plugins/tmux-sidebar (file tree sidebar)
#   - tmux-plugins/tmux-yank (clipboard integration)
#   - tmux-plugins/tmux-resurrect (session persistence - manual save/restore)
#   - tmux-plugins/tmux-continuum (auto-save/restore for resurrect)

tmux_plugins:
  tpm:
    repo: https://github.com/tmux-plugins/tpm
    install_dir: ~/.config/tmux/plugins/tpm
    description: Tmux Plugin Manager - auto-installs plugins declared in tmux.conf

# ================================================================
# NPM GLOBAL PACKAGES
# ================================================================
# Installed via: npm install -g <package>
# Managed by nvm (Node.js version manager)
# These are system-wide tools, not project dependencies

npm_globals:
  # Language Servers
  language_servers:
    - name: typescript-language-server
      description: TypeScript & JavaScript LSP

    - name: typescript
      description: TypeScript compiler (peer dependency for ts-server)

    - name: bash-language-server
      description: Bash & Shell script LSP

    - name: yaml-language-server
      description: YAML LSP

    - name: vscode-langservers-extracted
      description: HTML, CSS, JSON, ESLint LSPs

    - name: gh-actions-language-server
      description: GitHub Actions LSP

    - name: "@taplo/cli"
      description: TOML language server and formatter

  # Linters & Formatters
  linters_formatters:
    - name: eslint
      description: JavaScript/TypeScript linter

    - name: prettier
      description: Code formatter (multi-language)

    - name: markdownlint-cli
      description: Markdown linter

# ================================================================
# UV TOOLS (Python)
# ================================================================
# Installed via: uv tool install <package>
# Managed by uv (fast Python package manager)
# These are Python CLI tools, not project dependencies

uv_tools:
  # Linters & Formatters
  linters_formatters:
    - name: ruff
      description: Fast Python linter & formatter (replaces flake8, black, isort)

    - name: mypy
      description: Static type checker for Python

    - name: basedpyright
      description: Type checker (Pyright fork with better defaults)

  # Code Quality
  code_quality:
    - name: codespell
      description: Spell checker for code

  # SQL
  sql:
    - name: sqlfluff
      description: SQL linter and formatter

  # Template Linting
  template:
    - name: djlint
      description: Django/Jinja template linter & formatter

  # Utilities
  utilities:
    - name: keymap-drawer
      command: keymap
      description: Generate keyboard layout diagrams

    - name: nbpreview
      description: Jupyter notebook preview in terminal

    - name: numpy
      description: Numerical computing (for various tools)

  # Development Tools
  development:
    - name: pre-commit
      description: Git pre-commit hook framework

    - name: tldr
      description: Collaborative cheatsheets for console commands

# ================================================================
# GO TOOLS
# ================================================================
# Installed via: go install <package>@latest
# Managed by Go toolchain (installed in Phase 2)
# These are Go CLI tools installed globally

go_tools:
  - name: task
    package: github.com/go-task/task/v3/cmd/task
    description: Task runner / build tool (Taskfile.yml)

  - name: cheat
    package: github.com/cheat/cheat/cmd/cheat
    description: Interactive cheatsheet CLI

  - name: terraform-docs
    package: github.com/terraform-docs/terraform-docs
    description: Generate terraform documentation

  - name: gum
    package: github.com/charmbracelet/gum
    description: Tool for glamorous shell scripts (used by menu/notes apps)

  - name: lazydocker
    package: github.com/jesseduffield/lazydocker
    description: Terminal UI for Docker with compose support

  - name: actionlint
    package: github.com/rhysd/actionlint/cmd/actionlint
    description: GitHub Actions workflow linter

# ================================================================
# SHELL PLUGINS
# ================================================================
# Manually cloned into ~/.config/zsh/plugins
# Not managed by package managers

shell_plugins:
  - name: git-open
    repo: https://github.com/paulirish/git-open.git
    description: Open repo in browser from terminal

  - name: zsh-vi-mode
    repo: https://github.com/jeffreytse/zsh-vi-mode.git
    description: Better vi-mode for ZSH

  - name: forgit
    repo: https://github.com/wfxr/forgit.git
    description: Interactive git commands with fzf

  - name: zsh-syntax-highlighting
    repo: https://github.com/zsh-users/zsh-syntax-highlighting.git
    description: Fish-like syntax highlighting for ZSH

# ================================================================
# MAC APP STORE APPS
# ================================================================
# Installed via: mas install <id>
# Platform: macOS only
# Note: mas (Mac App Store CLI) may fail on certain macOS versions
# These apps can be manually installed via the App Store GUI if needed

mas_apps:
  - name: Color Picker
    id: 1545870783
    description: Color picker utility for macOS

  - name: Dark Reader for Safari
    id: 1438243180
    description: Dark mode for Safari websites

  - name: Dato
    id: 1470584107
    description: Menu bar calendar and time zones

  - name: Forecast Bar
    id: 982710545
    description: Weather forecast in menu bar

  - name: IPEVO Annotator
    id: 1237562727
    description: Screen annotation and drawing tool

  - name: Microsoft Excel
    id: 462058435
    description: Spreadsheet application

  - name: Microsoft PowerPoint
    id: 462062816
    description: Presentation software

  - name: Microsoft Remote Desktop
    id: 1295203466
    description: Remote desktop client for macOS

  - name: Microsoft Word
    id: 462054704
    description: Word processing application

  - name: NiBoard
    id: 1511409657
    description: Whiteboard and sketching app

  - name: Pixelstyle Photo Editor
    id: 1244649277
    description: Photo editing application

  - name: Todoist
    id: 585829637
    description: Task management and to-do list

  - name: Xcode
    id: 497799835
    description: Apple's IDE for macOS and iOS development

# ================================================================
# LINUX GUI APPLICATIONS
# ================================================================
# Installed via Flatpak (universal across all Linux distributions)
# Platform: Linux only (NOT WSL - GUI runs in Windows)
# Install: flatpak install flathub <flatpak_id>
# See: https://flathub.org for application catalog

linux_gui_apps:
  - name: dbeaver-community
    flatpak_id: io.dbeaver.DBeaverCommunity
    description: Universal database GUI

  - name: discord
    flatpak_id: com.discordapp.Discord
    description: Chat platform

  - name: slack
    flatpak_id: com.slack.Slack
    description: Team communication

# ================================================================
# MACOS CASKS
# ================================================================
# GUI applications for macOS
# Installed via: brew install --cask <name>

macos_casks:
  - name: aerospace
    description: Tiling window manager

  - name: alfred
    description: Launcher & productivity

  - name: bettertouchtool
    description: Input customization

  - name: dbeaver-community
    description: Universal database GUI

  - name: macs-fan-control
    description: Fan control utility

  - name: michaelvillar-timer
    description: Timer app

  - name: multipass
    description: Ubuntu VM manager

  - name: discord
    description: Chat platform

  - name: slack
    description: Team communication (using cask for automation, removed from MAS)

  - name: zoom
    description: Video conferencing

  - name: obsidian
    description: Note taking
# ================================================================
# NOTES
# ================================================================
# This file is the single source of truth for package installation
# Parsed by management/parse-packages.py (Python)
#
# Package Management Philosophy:
#   - System packages: apt/pacman/brew for OS-level tools (see system_packages)
#   - Language-specific managers: npm, uv, cargo, go (consistent across platforms)
#   - GitHub binaries: For tools needing latest versions (neovim, lazygit, etc)
#
# Tools NOT in system_packages (installed via other methods):
#   - bat, eza, fd-find, zoxide, git-delta, tinty: cargo-binstall
#   - neovim, lazygit, yazi, fzf: GitHub releases
#   - go: GitHub releases (not apt/pacman golang-go)
#   - nvm, npm packages: nvm + npm (not system Node.js)
#   - Python tools: uv (not system pip)
#   - Go tools: go install (see go_tools)
#   - AWS CLI: Official installer (see management/scripts/install-awscli.sh)
#       macOS: Notes AWS CLI managed by Homebrew
#       Linux: Downloads official installer, installs to ~/.local/aws-cli
#       Not in system_packages - AWS recommends official installer only
#
# Runtime Versions:
#   - Node.js: Managed by nvm (see runtimes.node.version)
#   - Python: Managed by uv
#   - Go: Installed from GitHub releases (see runtimes.go.min_version)
#   - Rust: Installed via rustup
#
# Parsing examples:
#   python parse-packages.py --type=system --manager=apt
#   python parse-packages.py --type=cargo
#   python parse-packages.py --type=npm
#   python parse-packages.py --type=go
#   python parse-packages.py --type=mas
#   python parse-packages.py --type=linux-gui
#   python parse-packages.py --type=macos-casks
#   python parse-packages.py --get=runtimes.node.version
#
# To update all packages:
#   task update           # Updates everything
#   task macos:update-all # macOS-specific
#   task wsl:update-all   # WSL-specific
#
# To add new packages:
#   1. Add to this file under the appropriate section
#   2. Run: task install or platform-specific install task
#   3. Commit changes
